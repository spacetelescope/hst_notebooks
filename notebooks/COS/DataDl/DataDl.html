

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Downloading COS Data &#8212; HST Notebooks</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/table.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/COS/DataDl/DataDl';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Viewing COS Data" href="../ViewData/ViewData.html" />
    <link rel="prev" title="Setting up your computer environment for working with COS data" href="../Setup/Setup.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/stsci_logo2.png" class="logo__image only-light" alt="HST Notebooks - Home"/>
    <script>document.write(`<img src="../../../_static/stsci_logo2.png" class="logo__image only-dark" alt="HST Notebooks - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    STScI HST Notebook Repository HQ
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">ACS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../ACS/README.html">ACS Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_findsat_mrt/acs_findsat_mrt_example.html">Satellite trail detection in ACS/WFC data using acstools.findsat_mrt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_saturation_trails/acs_saturation_trails.html">ACS Linearity with Saturated Stars</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_cte_forward_model/acs_cte_forward_model_example.html">Pixel-based ACS/WFC CTE Forward Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_subarrays/acs_subarrays.html">ACS Image Reduction for Subarray Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_sbc_dark_analysis/acs_sbc_dark_analysis.html">SBC Dark Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_reduction/acs_reduction.html">ACS/WFC Image Reduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_pixel_area_maps/acs_pixel_area_maps.html">ACS Pixel Area Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_polarization_tools/acs_polarization_tools.html">Using ACS Polarization Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_focus_diverse_epsfs/acs_focus_diverse_epsfs.html">Focus Diverse ePSFs for ACS/WFC</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">COS</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../README.html">COS Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Setup/Setup.html">Setting up your computer environment for working with COS data</a></li>





<li class="toctree-l1 current active"><a class="current reference internal" href="#">Downloading COS Data</a></li>




<li class="toctree-l1"><a class="reference internal" href="../ViewData/ViewData.html">Viewing COS Data</a></li>





<li class="toctree-l1"><a class="reference internal" href="../AsnFile/AsnFile.html">Modifying or Creating an Association File</a></li>





<li class="toctree-l1"><a class="reference internal" href="../CalCOS/CalCOS.html">Running the COS Data Pipeline (<code class="docutils literal notranslate"><span class="pre">CalCOS</span></code>)</a></li>






<li class="toctree-l1"><a class="reference internal" href="../SplitTag/SplitTag.html">Splitting COS Exposures into sub-exposures with <code class="docutils literal notranslate"><span class="pre">splittag</span></code></a></li>







<li class="toctree-l1"><a class="reference internal" href="../DayNight/DayNight.html">Filtering out COS Data taken during the Day or Night</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LSF/LSF.html">Working with the COS Line Spread Function (LSF)</a></li>

<li class="toctree-l1"><a class="reference internal" href="../Extract/Extract.html">Editing the extraction boxes in a spectral extraction file (<code class="docutils literal notranslate"><span class="pre">XTRACTAB</span></code>)</a></li>







<li class="toctree-l1"><a class="reference internal" href="../ExceptionReport/ExceptionReport.html">What to do when you get an Exception Report for COS</a></li>







</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">DrizzlePac</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/README.html">DrizzlePac Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/using_updated_astrometry_solutions/using_updated_astrometry_solutions.html">Improving Astrometry Using Alternate WCS Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/align_to_catalogs/align_to_catalogs.html">Aligning HST images to an Absolute Reference Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/align_sparse_fields/align_sparse_fields.html">Aligning Deep Exposures of Sparse Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/align_multiple_visits/align_multiple_visits.html">Optimizing Image Alignment for Multiple HST Visits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/use_ds9_regions_in_tweakreg/use_ds9_regions_in_tweakreg.html">TWEAKREG Tips - Using DS9 Regions for Source Inclusion/Exclusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/optimize_image_sampling/optimize_image_sampling.html">Optimizing the Image Sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/align_mosaics/align_mosaics.html">Aligning HST Mosaics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/sky_matching/sky_matching.html">Sky Matching for HST Mosaics <a id="top"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/mask_satellite/mask_satellite.html">Satellite Trail Masking Techniques</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">HASP</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../HASP/Setup/Setup.html">Installing the Hubble Advanced Spectral Products Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../HASP/CoaddTutorial/CoaddTutorial.html">Inputting User Data using the Hubble Advanced Spectral Products Script</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../HASP/FluxScaleTutorial/FluxScaleTutorial.html">Scaling Flux while using the Hubble Advanced Spectral Products Script</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../HASP/DataDiagnostic/DataDiagnostics.html">HASP Data Diagnostic Notebook</a></li>




<li class="toctree-l1"><a class="reference internal" href="../../HASP/WavelengthAdjustment/WavelengthAdjustment.html">Wavelength Adjustments for Running the Hubble Advanced Spectral Products (HASP) Script</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">NICMOS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../NICMOS/nicmos_unit_conversion/nicmos_unit_conversion.html">Programmatic Replacements for NICMOS Units Conversion Form</a></li>


</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">STIS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../STIS/README.html">STIS Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/cross-correlation/cross-correlation.html">Correcting for Missing Wavecals with Cross-Correlation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/custom_ccd_darks/custom_ccd_darks.html">Custom CCD Darks <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/drizpac_notebook/STIS_DrizzlePac_Tutorial.html">STIS DrizzlePac Tutorial <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/CoronagraphyViz/STIS_Coronagraphy_Visualization_v2.html">STIS Coronagraphy Visualization Tool (v2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/calstis/calstis_2d_ccd.html">Calstis 2-D CCD Data Reduction <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/target_acquisition/target_acquisition.html">Evaluating STIS Target Acquisitions <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/view_data/view_data.html">Viewing STIS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/extraction/1D_Extraction.html">1D Spectra Extraction <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/low_count_uncertainties/Low_Count_Uncertainties.html">Low Count Uncertainties in STIS <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/contrast_sensitivity/STIS_Coronagraphic_Observation_Feasibility.html">STIS Coronagraphic Observation Feasibility</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">WFC3</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../WFC3/README.html">WFC3 Notebooks</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../WFC3/general_tools.html">General Tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/image_displayer_analyzer/wfc3_image_displayer_analyzer.html">WFC3 Image Displayer &amp; Analyzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/exception_report/wfc3_exception_report.html">Exception Report Checklist - WFC3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/calwf3_v1.0_cte/calwf3_with_v1.0_PCTE.html">Processing WFC3/UVIS Data with <code class="docutils literal notranslate"><span class="pre">calwf3</span></code> Using the v1.0 CTE-Correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/persistence/wfc3_ir_persistence.html">Masking Persistence in WFC3/IR Images</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../WFC3/ir_tvb.html">WFC3/IR Time Variable Background (TVB)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/ir_ima_visualization/IR_IMA_Visualization_with_an_Example_of_Time_Variable_Background.html">WFC3/IR IMA Visualization Tools with An Example of Time Variable Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/calwf3_recalibration/calwf3_recal_tvb.html">Manual Recalibration with calwf3: Turning off the IR Linear Ramp Fit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/tvb_flattenramp/TVB_flattenramp_notebook.html">Correcting for Helium Line Emission Background in IR Exposures using the “Flatten-Ramp” Technique</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/ir_scattered_light_calwf3_corrections/Correcting_for_Scattered_Light_in_IR_Exposures_Using_calwf3_to_Mask_Bad_Reads.html">Correcting for Scattered Light in WFC3/IR Exposures: Using <code class="docutils literal notranslate"><span class="pre">calwf3</span></code> to Mask Bad Reads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/ir_scattered_light_manual_corrections/Correcting_for_Scattered_Light_in_IR_Exposures_by_Manually_Subtracting_Bad_Reads.html">Correcting for Scattered Light in WFC3/IR Exposures: Manually Subtracting Bad Reads</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../WFC3/photometry.html">Photometry</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/filter_transformations/filter_transformations.html">WFC3/UVIS Filter Transformations with stsynphot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/flux_conversion_tool/flux_conversion_tool.html">Flux Unit Conversions with synphot and stsynphot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/photometry_examples/phot_examples.html">Synthetic Photometry Examples for WFC3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/uvis_time_dependent_photometry/uvis_timedep_phot.html">WFC3/UVIS Time-dependent Photometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/zeropoints/zeropoints.html">Calculating WFC3 Zeropoints with STSynphot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/uvis_pam_corrections/WFC3_UVIS_Pixel_Area_Map_Corrections_for_Subarrays.html">WFC3/UVIS Pixel Area Map Corrections for Subarrays</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../WFC3/point_spread_function.html">Point Spread Function (PSF)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/point_spread_function/hst_point_spread_function.html">HST WFC3 Point Spread Function Modeling   </a></li>
<li class="toctree-l2"><a class="reference internal" href="../../WFC3/mast_api_psf/download_psf_cutouts.html">Downloading WFC3 and WFPC2 PSF Cutouts from MAST</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/spacetelescope/hst_notebooks/blob/main/notebooks/COS/DataDl/DataDl.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/spacetelescope/hst_notebooks" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/spacetelescope/hst_notebooks/issues/new?title=Issue%20on%20page%20%2Fnotebooks/COS/DataDl/DataDl.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/notebooks/COS/DataDl/DataDl.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Downloading COS Data</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Downloading COS Data</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning Goals</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">0. Introduction</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#choosing-how-to-access-the-data">0.1. Choosing how to access the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-one-cell-summary-of-this-notebook-s-key-points">0.2. A one-cell summary of this Notebook’s key points:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#now-returning-to-our-more-detailed-walkthrough">Now, returning to our more detailed walkthrough…</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-the-data-through-the-browser-interface">1. Downloading the data through the browser interface</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-hst-specific-web-search">1.1 The HST-specific Web Search</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-1">Fig 1.1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-2">Fig 1.2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-3">Fig 1.3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-4">Fig 1.4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-5">Fig 1.5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-6">Fig 1.6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-7">Fig 1.7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-searching-the-archive-for-trappist-1-data">Exercise 1: <em>Searching the archive for TRAPPIST-1 data</em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-a-series-of-observations-on-the-hst-specific-web-search">1.2. Searching for a Series of Observations on the HST-specific Web Search</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-8">Fig 1.8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-9">Fig 1.9</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-mast-portal">1.3. The MAST Portal</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-10">Fig 1.10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-11">Fig 1.11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-12">Fig 1.12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-13">Fig 1.13</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-a-series-of-observations-on-the-mast-portal">1.4. Searching for a Series of Observations on the MAST Portal</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-14">Fig 1.14</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#the-python-package-astroquery-mast">2. The Python Package <code class="docutils literal notranslate"><span class="pre">astroquery.mast</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#we-will-import-the-following-packages">We will import the following packages:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-a-single-source-with-astroquery">2.1. Searching for a single source with <code class="docutils literal notranslate"><span class="pre">Astroquery</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#narrowing-search-with-observational-parameters">2.2. Narrowing Search with Observational Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#choosing-and-downloading-data-products">2.3. Choosing and Downloading Data Products</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-download-the-raw-counts-data-on-trappist-1">Exercise 2: <em>Download the raw counts data on TRAPPIST-1</em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-astroquery-to-find-data-on-a-series-of-sources">2.4. Using astroquery to find data on a series of sources</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#congratulations-you-finished-this-notebook">Congratulations! You finished this Notebook!</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here">There are more COS data walkthrough Notebooks on different topics. You can find them here.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#citations">Citations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-solutions">Exercise Solutions:</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p><a id="topD"></a></p>
<section class="tex2jax_ignore mathjax_ignore" id="downloading-cos-data">
<h1>Downloading COS Data<a class="headerlink" href="#downloading-cos-data" title="Permalink to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="learning-goals">
<h1>Learning Goals<a class="headerlink" href="#learning-goals" title="Permalink to this heading">#</a></h1>
<p><font size="5"> This Notebook is designed to walk the user (<em>you</em>) through: <b>Downloading existing Cosmic Origins Spectrograph (<em>COS</em>) data from the online archive</b></font></p>
<p><strong>0. <span class="xref myst">Introduction</span></strong></p>
<p>- 0.1. <span class="xref myst">Choosing how to access the data</span></p>
<p>- 0.2. <span class="xref myst">A one-cell summary of this Notebook’s key points</span></p>
<p><strong>1. <span class="xref myst">Using the web browser interface</span></strong></p>
<p>- 1.1. <span class="xref myst">The HST-specific Web Search</span></p>
<p>- 1.2. <span class="xref myst">Searching for a Series of Observations on the HST-specific Web Search</span></p>
<p>- 1.3. <span class="xref myst">The MAST Portal</span></p>
<p>- 1.4. <span class="xref myst">Searching for a Series of Observations on the MAST Portal</span></p>
<p><strong>2. <span class="xref myst">Using the <code class="docutils literal notranslate"><span class="pre">Python</span></code> module <code class="docutils literal notranslate"><span class="pre">Astroquery</span></code></span></strong></p>
<p>- 2.1. <span class="xref myst">Searching for a single source with Astroquery</span></p>
<p>- 2.2. <span class="xref myst">Narrowing Search with Observational Parameters</span></p>
<p>- 2.3. <span class="xref myst">Choosing and Downloading Data Products</span></p>
<p>- 2.4. <span class="xref myst">Using astroquery to find data on a series of sources</span></p>
<p><a id=introDl></a></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="introduction">
<h1>0. Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h1>
<p><strong>The Cosmic Origins Spectrograph (<a class="reference external" href="https://www.nasa.gov/content/hubble-space-telescope-cosmic-origins-spectrograph"><em>COS</em></a>) is an ultraviolet spectrograph on-board the Hubble Space Telescope (<a class="reference external" href="https://www.stsci.edu/hst/about"><em>HST</em></a>) with capabilities in the near ultraviolet (<em>NUV</em>) and far ultraviolet (<em>FUV</em>).</strong></p>
<p><strong>This tutorial aims to prepare you to access the existing COS data of your choice by walking you through downloading a processed spectrum, as well as various calibration files obtained with COS.</strong></p>
<ul class="simple">
<li><p>For an in-depth manual to working with COS data and a discussion of caveats and user tips, see the <a class="reference external" href="https://hst-docs.stsci.edu/display/COSDHB/">COS Data Handbook</a>.</p></li>
<li><p>For a detailed overview of the COS instrument, see the <a class="reference external" href="https://hst-docs.stsci.edu/display/COSIHB/">COS Instrument Handbook</a>.</p></li>
</ul>
<p><a id=dataaccess></a></p>
<section id="choosing-how-to-access-the-data">
<h2>0.1. Choosing how to access the data<a class="headerlink" href="#choosing-how-to-access-the-data" title="Permalink to this heading">#</a></h2>
<p><strong>This Notebook explains three methods of accessing COS data hosted by the STScI Mikulski Archive for Space Telescopes (MAST).</strong>
You may read through all three, or you may wish to focus on a particular method which best suits your needs.
<strong>Please use the table below to determine which section on which to focus.</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>The <a class="reference external" href="https://mast.stsci.edu/search/ui/#/hst">HST-specific Search (Web Interface)</a></p></th>
<th class="head"><p>The <a class="reference external" href="https://mast.stsci.edu/portal/Mashup/Clients/Mast/Portal.html">MAST Portal (Web Interface)</a></p></th>
<th class="head"><p>The <a class="reference external" href="http://astroquery.readthedocs.io/"><code class="docutils literal notranslate"><span class="pre">Astroquery</span></code> (<code class="docutils literal notranslate"><span class="pre">Python</span></code> Interface)</a></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p></p></td>
<td><p>- User-friendly point-and-click searching</p></td>
<td><p>- User-friendly point-and-click searching</p></td>
<td><p>- Requires a bit of <code class="docutils literal notranslate"><span class="pre">Python</span></code> experience</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>- Advanced <strong>mission-specific</strong> search parameters, including: central wavelength, detector, etc.</p></td>
<td><p>- Lacks some mission-specific search parameters but has non-HST data</p></td>
<td><p>- Allows for programmatic searching and downloads</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>- Easy to select and download specific datasets</p></td>
<td><p>- Easy to select and download specific datasets</p></td>
<td><p>- Best for downloading very large datasets</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><em><strong>Use this method if…</strong></em></p></td>
<td><p><em>…You’re unfamiliar with <code class="docutils literal notranslate"><span class="pre">Python</span></code> and need to search for data by cenwave</em></p></td>
<td><p><em>…You’re exploring the data from multiple observatories and you don’t need to search by cenwave</em></p></td>
<td><p><em>…You know <code class="docutils literal notranslate"><span class="pre">Python</span></code> and have an idea of what data you’re looking for, or you have a lot of data</em></p></td>
</tr>
<tr class="row-odd"><td><p><em><strong>Described in…</strong></em></p></td>
<td><p><em><span class="xref myst">Section 1.1</span></em></p></td>
<td><p><em><span class="xref myst">Section 1.3</span></em></p></td>
<td><p><em><span class="xref myst">Section 2.1</span></em></p></td>
</tr>
</tbody>
</table>
</div>
<p><em>Note</em> that these are only recommendations, and you may prefer another option. For most purposes, the writer of this tutorial recommends exploring your data first with one of the Web interfaces. Then, if repeatability is important to your application, you can implement this using the <code class="docutils literal notranslate"><span class="pre">Astroquery</span></code> <code class="docutils literal notranslate"><span class="pre">Python</span></code> interface.</p>
<p><a id=onecellDl></a></p>
</section>
<section id="a-one-cell-summary-of-this-notebook-s-key-points">
<h2>0.2. A one-cell summary of this Notebook’s key points:<a class="headerlink" href="#a-one-cell-summary-of-this-notebook-s-key-points" title="Permalink to this heading">#</a></h2>
<p>While the rest of this Notebook will walk you through each step and decision made when downloading COS data, the following code cell serves as a summary for the Notebook. It contains the key material condensed into a single code cell, without much explanation. In the rest of this Notebook, we explain other methods of downloading data which require less <code class="docutils literal notranslate"><span class="pre">Python</span></code> experience and which may be more useful for exploring data when you don’t know <em>exactly</em> what you’re looking for.</p>
<p>If this cell is all the help you need, great! If you still have questions, read on!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Import the necessary libraries:</span>
<span class="c1"># For searching and downloading from the MAST archive:</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astroquery.mast</span><span class="w"> </span><span class="kn">import</span> <span class="n">Observations</span>
<span class="c1"># For handling system paths:</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># 2. Download an example dataset using astroquery:</span>
<span class="c1"># 2.1. Find all the observations from a single HST Proposal:</span>
<span class="c1"># We&#39;ll search for a program with Proposal ID 15366</span>
<span class="c1"># A list of search criteria can be found by running:</span>
<span class="c1">#    Observations.get_metadata(&#39;observations&#39;)</span>
<span class="n">obs_from_proposal</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">proposal_id</span><span class="o">=</span><span class="s2">&quot;15366&quot;</span><span class="p">)</span>

<span class="c1"># 2.2. Find all the data products for these observations:</span>
<span class="c1"># These include all the files associated with your observation</span>
<span class="n">products_from_proposal</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">get_product_list</span><span class="p">(</span><span class="n">obs_from_proposal</span><span class="p">)</span>

<span class="c1"># 2.3. Tell the user how many total files were found:</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">products_from_proposal</span><span class="p">)</span><span class="si">}</span><span class="s2"> data products&quot;</span><span class="p">)</span>

<span class="c1"># 2.4. Filter to a specific subset of these products:</span>
<span class="c1"># Here we filter X1DSUM files, which are the final 1-D extracted spectra</span>
<span class="c1"># and association files, which list related exposures combined into the X1DSUM</span>
<span class="n">products_to_download</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">filter_products</span><span class="p">(</span>
    <span class="n">products_from_proposal</span><span class="p">,</span>
    <span class="n">productSubGroupDescription</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;X1DSUM&quot;</span><span class="p">,</span> <span class="s2">&quot;ASN&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># 2.5. Download the filtered products:</span>
<span class="n">dl_table</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">download_products</span><span class="p">(</span><span class="n">products_to_download</span><span class="p">)</span>

<span class="c1"># 2.6. Gather the downloaded files:</span>
<span class="c1"># Turn string paths to the files into python pathlib.Path objects</span>
<span class="c1"># Then make lists of these local paths, aggregated by type of file</span>
<span class="n">onecell_x1dsum_products</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">local_path</span><span class="p">)</span> <span class="k">for</span> <span class="n">local_path</span> <span class="ow">in</span>
                           <span class="n">dl_table</span><span class="p">[</span><span class="s2">&quot;Local Path&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;x1dsum&quot;</span> <span class="ow">in</span> <span class="n">local_path</span><span class="p">]</span>

<span class="n">onecell_asn_products</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">local_path</span><span class="p">)</span> <span class="k">for</span> <span class="n">local_path</span> <span class="ow">in</span>
                        <span class="n">dl_table</span><span class="p">[</span><span class="s2">&quot;Local Path&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;asn&quot;</span> <span class="ow">in</span> <span class="n">local_path</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Downloaded X1DSUM Files: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">onecell_x1dsum_products</span><span class="p">,</span>
      <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Downloaded ASN Files: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">onecell_asn_products</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Found 611 data products
INFO: 6 of 12 products were duplicates. Only returning 6 unique product(s). [astroquery.mast.utils]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldm701010_asn.fits to ./mastDownload/HST/ldm701010/ldm701010_asn.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldm701010_x1dsum.fits to ./mastDownload/HST/ldm701010/ldm701010_x1dsum.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldm701020_asn.fits to ./mastDownload/HST/ldm701020/ldm701020_asn.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldm701020_x1dsum.fits to ./mastDownload/HST/ldm701020/ldm701020_x1dsum.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldm701030_asn.fits to ./mastDownload/HST/ldm701030/ldm701030_asn.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldm701030_x1dsum.fits to ./mastDownload/HST/ldm701030/ldm701030_x1dsum.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloaded X1DSUM Files: 
 [PosixPath(&#39;mastDownload/HST/ldm701010/ldm701010_x1dsum.fits&#39;), PosixPath(&#39;mastDownload/HST/ldm701020/ldm701020_x1dsum.fits&#39;), PosixPath(&#39;mastDownload/HST/ldm701030/ldm701030_x1dsum.fits&#39;)] 
Downloaded ASN Files: 
 [PosixPath(&#39;mastDownload/HST/ldm701010/ldm701010_asn.fits&#39;), PosixPath(&#39;mastDownload/HST/ldm701020/ldm701020_asn.fits&#39;), PosixPath(&#39;mastDownload/HST/ldm701030/ldm701030_asn.fits&#39;)]
</pre></div>
</div>
</div>
</div>
</section>
<section id="now-returning-to-our-more-detailed-walkthrough">
<h2>Now, returning to our more detailed walkthrough…<a class="headerlink" href="#now-returning-to-our-more-detailed-walkthrough" title="Permalink to this heading">#</a></h2>
<p><font size="5"> We will define a few directories in which to place our data.</font></p>
<p>And to create new directories, we’ll import <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import for: working with system paths</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># This will be an important directory for the Notebook, where we save data</span>
<span class="n">data_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;./data/&#39;</span><span class="p">)</span>
<span class="c1"># If directory doesn&#39;t exist, it&#39;ll be created</span>
<span class="n">data_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><a id="downloadD"></a></p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="downloading-the-data-through-the-browser-interface">
<h1>1. Downloading the data through the browser interface<a class="headerlink" href="#downloading-the-data-through-the-browser-interface" title="Permalink to this heading">#</a></h1>
<p>One can search for COS data from both a browser-based Graphical User Interface (<em>gui</em>) and a <code class="docutils literal notranslate"><span class="pre">Python</span></code> interface. This Section will examine two web interfaces. <span class="xref myst">Section 2</span> will explain the <code class="docutils literal notranslate"><span class="pre">Python</span></code> interface.</p>
<p><em>Note, there are other, more specialized ways to query the mast API not discussed in this Notebook. An in-depth MAST API tutorial can be found <a class="reference external" href="https://mast.stsci.edu/api/v0/MastApiTutorial.html">here</a>.</em></p>
<p><a id="mastD"></a></p>
<section id="the-hst-specific-web-search">
<h2>1.1 The HST-specific Web Search<a class="headerlink" href="#the-hst-specific-web-search" title="Permalink to this heading">#</a></h2>
<p><strong>The browser GUI for searching <em>specifically</em> through <a class="reference external" href="https://mast.stsci.edu/search/ui/#/hst">HST archival data can be found here</a>.</strong>
Full documentation of the HST-specific search can be found <a class="reference external" href="https://outerspace.stsci.edu/display/MASTDOCS/Mission+Search+Guide">here</a>. In this section of the Notebook, we’ll show examples of searching for COS data using the HST-specific form. A more general MAST GUI, which allows access to data from other telescopes such as TESS, but does not offer all HST-specific search parameters, will be discussed in <span class="xref myst">Section 1.3</span>.</p>
<p>The search page  of the HST-specific interface is laid out as in Figure 1.1:</p>
<section id="fig-1-1">
<h3>Fig 1.1<a class="headerlink" href="#fig-1-1" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/new_hst_search_login.png"><img alt="An image of the MAST search site. On the page there are boxes for each different criteria that you want in your search, such as Object Name in the top left, active instruments below that, and at the bottom of the page there is a box that you can fill with a certain column name and your desired criteria (if the criteria is not already on the page). At the top right is the 'My ST' button." src="../../../_images/new_hst_search_login.png" style="width: 900px;" /></a>
<p>If you are accessing proprietary data, you will need to make an account or log in at the top right under “MY ST” (Fig 1.1, boxed in red). If you are accessing non-proprietary data, you may continue without logging in.</p>
<p>Figure 1.2 shows a filled-in search form, which will query the MAST archive for observations which:</p>
<ul class="simple">
<li><p>Fall within 3 arcminutes of either of the resolved stars: AV75 or AV80</p></li>
<li><p>Are spectroscopic observations, rather than images</p></li>
<li><p>Have exposure times of greater than 1000 seconds</p></li>
<li><p>Are taken with the COS instrument, using the G160M grating and either the 1533 or the 1577 cenwave setting</p></li>
</ul>
</section>
<section id="fig-1-2">
<h3>Fig 1.2<a class="headerlink" href="#fig-1-2" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/hst_search_query_updated.png"><img alt="New HST-specific website search filled out with a COS data query, boxes with each criteria from above are highlighted with a red box. The central wavelength condition was added to the bottom box where you choose columns for criteria, since the central wavelength is not a pre-given criteria." src="../../../_images/hst_search_query_updated.png" style="width: 900px;" /></a>
<p>The above search results in the table shown in Figure 1.3.</p>
</section>
<section id="fig-1-3">
<h3>Fig 1.3<a class="headerlink" href="#fig-1-3" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/new_hst_search_results.png"><img alt="The page is now the search results page. At the top left are the 'Edit Search' box highlighted in dashed red. Below that is the 'Download Dataset' button highlighted with a green circle. Under that is the list of datasets, with each row beginning with a empty checkbox, followed by information about the dataset, such as search position, dataset name, target name, etc." src="../../../_images/new_hst_search_results.png" style="width: 900px;" /></a>
<p>If you need to change some parameters in your search - for instance, to also find data from the G130M grating - click on “Edit Search” (Fig 1.3, red dashed box).</p>
<p>If you are happy with your search, you may now select all the observations whose data you would like to download. Do this by clicking on the checkbox for those observations (Fig 1.3, blue box), and then clicking “Download Data” (Fig 1.3, green oval).</p>
<p>Most COS spectra have preview images (simple plots of flux by wavelength) which can be viewed before downloading the data. Clicking the dataset name (Fig 1.3, blue dashed oval) will take you to a page which shows the preview image, as well as some basic information about the data and whether there were any known failures during the operation. An example of such a page is shown in Figure 1.4.</p>
</section>
<section id="fig-1-4">
<h3>Fig 1.4<a class="headerlink" href="#fig-1-4" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/preview_spectrum_small.png"><img alt="The page is now an image of a spectrum preview for dataset LPXK51020. It shows two plots of wavelength vs flux. Below is a list of exposure information, such as observation data, exposure time, release date, mode. At the very bottom of the page is the proposal ID along with the PI and CoIs." src="../../../_images/preview_spectrum_small.png" style="width: 900px;" /></a>
<p>Returning to the results page shown in Fig 1.3 and clicking “Download Data” opens a window as shown in Figure 1.5. In this window you can search for filetypes using the search bar, and unselect/select all the data products shown in the filtered list (Fig 1.5, green circle). Clicking the “Showing all filetypes” box (Figure 1.5, red box) shows a drop-down (Figure 1.6) where you can choose to show/hide certain types of data such as the uncalibrated data.</p>
</section>
<section id="fig-1-5">
<h3>Fig 1.5<a class="headerlink" href="#fig-1-5" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/new_hst_search_downloading_all_files.png"><img alt="The image shows the a table of files in dataset LDJ1010. Each row shows different CalCOS products, such as the ASN file, X1DSUM, JIT, etc. The title of the table is the dataset name, and to the left of the name is the button to check all or none exposures, highlighted with a green circle. There are columns on the table that give information about the insturment used (COS) and the filter/grating (G140L). Above the table is a dropdown that allows you to choose the filetypes you wish to download." src="../../../_images/new_hst_search_downloading_all_files.png" style="width: 900px;" /></a>
</section>
<section id="fig-1-6">
<h3>Fig 1.6<a class="headerlink" href="#fig-1-6" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/new_hst_search_downloading_filetypes.png"><img alt="The image shows the same page as Figure 1.5, but the 'Showing all file types' dropdown button has been clicked. There are rows that have checkboxes on the left, each row from top to bottom is labled 'Calibrated', 'Uncalibrated', 'Aux/Other', 'Reference', 'Log/Jitter" src="../../../_images/new_hst_search_downloading_filetypes.png" style="width: 900px;" /></a>
<p>When all of your desired data products are checked, click “Start Download” (Fig 1.5, yellow dashed box). This will download a compressed “zipped” folder of all of your data, divided into subdirectories by the observation. Most operating systems can decompress these folders by default. For help decompressing the zipped files, you can follow these links for: <a class="reference external" href="https://support.microsoft.com/en-us/windows/zip-and-unzip-files-8d28fa72-f2f9-712f-67df-f80cf89fd4e5">Windows</a> and <a class="reference external" href="https://support.apple.com/guide/mac-help/zip-and-unzip-files-and-folders-on-mac-mchlp2528/mac">Mac</a>. There are numerous ways to do this on Linux, however we have not vetted them.</p>
<p>Let’s briefly return to the initial HST-specific search form to discuss another way to find data.
Rather than specifying parameters about the data we’re searching for, we can instead search by a dataset’s ID (Figure 1.7, pink box). As an example of this, we rather arbitrarily select <strong><code class="docutils literal notranslate"><span class="pre">LCXV13050</span></code></strong> because of its long exposure time, taken under an observing program described as:</p>
<blockquote>
<div><p>“Project AMIGA: Mapping the Circumgalactic Medium of Andromeda”</p>
</div></blockquote>
<p>This is a Quasar known as <a class="reference external" href="http://simbad.u-strasbg.fr/simbad/sim-basic?Ident=3c48&amp;submit=SIMBAD+search">3C48</a>, one of the first quasars discovered.</p>
</section>
<section id="fig-1-7">
<h3>Fig 1.7<a class="headerlink" href="#fig-1-7" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/new_hst_search_query2_small.png"><img alt="The image is showing the search page for MAST again. Halfway down the page is a box to input dataset name criteria. Above that is the obervation type box, which is composed of three check boxes. These boxes from left to right are 'All', 'Science', and 'Calibration'. The science box is the only one that is checked." src="../../../_images/new_hst_search_query2_small.png" style="width: 900px;" /></a>
<p><font size="5"> <b>Well done making it this far!</b></font></p>
<p>You can attempt the exercise below for some extra practice.</p>
</section>
<section id="exercise-1-searching-the-archive-for-trappist-1-data">
<h3>Exercise 1: <em>Searching the archive for TRAPPIST-1 data</em><a class="headerlink" href="#exercise-1-searching-the-archive-for-trappist-1-data" title="Permalink to this heading">#</a></h3>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/TRAPPIST-1">TRAPPIST-1</a> is a cool red dwarf with a multiple-exoplanet system.</p>
<ul class="simple">
<li><p>Find its coordinates using the <a class="reference external" href="http://simbad.u-strasbg.fr/simbad/sim-fbasic">SIMBAD Basic Search</a>.</p></li>
<li><p>Use those coordinates in the <a class="reference external" href="https://mast.stsci.edu/search/ui/#/hst">HST web search</a> or the <a class="reference external" href="https://mast.stsci.edu/portal/Mashup/Clients/Mast/Portal.html">MAST portal</a> to find all COS exposures of the system.</p></li>
<li><p>Limit the search terms to find the COS dataset taken in the COS far-UV configuration with the grating G130M.</p></li>
</ul>
<p><strong>What is the dataset ID, and how long was the exposure?</strong></p>
<p>Place your answer in the cell below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer here</span>
</pre></div>
</div>
</div>
</div>
<p><a id=WebSearchSeriesD></a></p>
</section>
</section>
<section id="searching-for-a-series-of-observations-on-the-hst-specific-web-search">
<h2>1.2. Searching for a Series of Observations on the HST-specific Web Search<a class="headerlink" href="#searching-for-a-series-of-observations-on-the-hst-specific-web-search" title="Permalink to this heading">#</a></h2>
<p>Now let’s try using the HST-specific web interface’s <a class="reference external" href="http://archive.stsci.edu/hst/search.php?form=fuf">file upload form</a> to search for a series of observations by their dataset IDs. We’re going to look for three observations of the same object, the white dwarf WD1057+719, taken with three different COS gratings. Two are in the FUV and one in the NUV. The dataset IDs are</p>
<ul class="simple">
<li><p>LDYR52010</p></li>
<li><p>LBNM01040</p></li>
<li><p>LBBD04040</p></li>
</ul>
<p>So that we have an example list of datasets to input to the web search, we make a comma-separated-value text file with these three <code class="docutils literal notranslate"><span class="pre">obs_ids</span></code>, and save it as <code class="docutils literal notranslate"><span class="pre">obsId_list.txt</span></code>.
You can also search by right ascension and declination, instead of by dataset ID.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The three observation IDs we want to gather</span>
<span class="n">obsIdList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;LDYR52010&#39;</span><span class="p">,</span> <span class="s1">&#39;LBNM01040&#39;</span><span class="p">,</span> <span class="s1">&#39;LBBD04040&#39;</span><span class="p">]</span>

<span class="c1"># Open up this new file in &quot;write&quot; mode</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./obsId_list.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># The first line tells the search what type of parameter we&#39;re searching</span>
    <span class="c1"># Here, it&#39;s the dataset ID.</span>
    <span class="c1"># It could be RA, DEC. In that case each row has two values</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Dataset_id</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># We want a newline after each obs_id except the last one</span>
    <span class="k">for</span> <span class="n">obsId</span> <span class="ow">in</span> <span class="n">obsIdList</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">obsId</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Make sure we don&#39;t end the file with a blank line (below)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">obsIdList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Then we can click <strong>Upload List of Objects</strong> on the HST-specific search form, and then choose <code class="docutils literal notranslate"><span class="pre">obsId_list.txt</span></code> under the browse menu which opens (Figure 1.8, pink box).
Because we are searching by Dataset ID, we don’t need to specify any additional parameters to narrow down the data.</p>
<section id="fig-1-8">
<h3>Fig 1.8<a class="headerlink" href="#fig-1-8" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/new_search_file_list_small.png"><img alt="The image shows the MAST search page, with the top box filled in. The title of this box is 'Object name(s) and/or RA and Dec pair(s). The filled in box is the text file obsId_list.txt. The observations box below it has only the science box checked off." src="../../../_images/new_search_file_list_small.png" style="width: 900px;" /></a>
<p>We now can access all the datasets specified in <code class="docutils literal notranslate"><span class="pre">obsId_list.txt</span></code>, as shown in Figure 1.9:</p>
</section>
<section id="fig-1-9">
<h3>Fig 1.9<a class="headerlink" href="#fig-1-9" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/new_search_file_list_res_small.png"><img alt="The image shows the MAST search results page, with the three datasets from our text file shows in each row." src="../../../_images/new_search_file_list_res_small.png" style="width: 900px;" /></a>
<p>We can select and download their data products as before.</p>
<p><a id = mastportD></a></p>
</section>
</section>
<section id="the-mast-portal">
<h2>1.3. The MAST Portal<a class="headerlink" href="#the-mast-portal" title="Permalink to this heading">#</a></h2>
<p>STScI hosts another web-based gui for accessing data, the <a class="reference external" href="https://mast.stsci.edu/portal/Mashup/Clients/Mast/Portal.html">MAST Portal</a>. This is a newer interface which hosts data from across many missions and allows the user to visualize the target in survey images, take quick looks at spectra or lightcurves, and manage multiple search tabs at once. Additionally, it handles downloads in a slightly more beginner-friendly manner than the current implementation of the Classic HST Search. This guide will only cover the basics of accessing COS data through the MAST Portal; you can find more in-depth documentation in the form of helpful video guides on the <a class="reference external" href="https://www.youtube.com/user/STScIMAST">MAST YouTube Channel</a>.</p>
<p><strong>Let’s find the same data we found in <span class="xref myst">Section 1.1</span>, on the QSO 3C48:</strong></p>
<p>Navigate to the MAST Portal at <a class="reference external" href="https://mast.stsci.edu/portal/Mashup/Clients/Mast/Portal.html">https://mast.stsci.edu/portal/Mashup/Clients/Mast/Portal.html</a>, and you will be greeted by a screen where the top looks like Figure 1.10.</p>
<section id="fig-1-10">
<h3>Fig 1.10<a class="headerlink" href="#fig-1-10" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/mastp_top.png"><img alt="The image shows the MAST portal, specifically the search box at the top." src="../../../_images/mastp_top.png" style="width: 900px;" /></a>
<p>Click on “Advanced Search” (boxed in red in Figure 1.10). This will open up a new search tab, as shown in Figure 1.11:</p>
</section>
<section id="fig-1-11">
<h3>Fig 1.11<a class="headerlink" href="#fig-1-11" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/mastp_adv.png"><img alt="The image shows the advanced search pop-up. On the left of the pop-up is a list of check boxes for different search criteria, such as Target name, instrument, mission, etc. To the left of that are larger boxes for different critera, and inside these mobes are rows with checkboxes. For example, there is a larger box labeled 'Observation type' with two checkbox rows labeled 'science' and 'calibration'." src="../../../_images/mastp_adv.png" style="width: 900px;" /></a>
<p>Fig 1.11 (above) shows the default search fields which appear. Depending on what you are looking for, these may or may not be the most helpful search fields. By unchecking some of the fields which we are not interested in searching by right now (Figure 1.12, boxed in green), and then entering the parameter values by which to narrow the search into each parameter’s box, we generate Fig 1.12. One of the six fields (Mission) by which we are narrowing is boxed in a dashed blue line. The list of applied filters is boxed in red. A dashed pink box at the top left indicates that 2 records were found matching all of these parameters. To its left is an orange box around the “Search” button to press to bring up the list of results.</p>
<p>Here we are searching by:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Search Parameter</strong></p></th>
<th class="head"><p><strong>Value</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Mission</p></td>
<td><p>HST</p></td>
</tr>
<tr class="row-odd"><td><p>Instrument</p></td>
<td><p>COS/FUV</p></td>
</tr>
<tr class="row-even"><td><p>Filters</p></td>
<td><p>G160M</p></td>
</tr>
<tr class="row-odd"><td><p>Target Name</p></td>
<td><p>3C48</p></td>
</tr>
<tr class="row-even"><td><p>Observation ID</p></td>
<td><p>LCXV* (<em>the star is a “wild card” value, so the search will find any file whose <code class="docutils literal notranslate"><span class="pre">obs_id</span></code> begins with LCXV</em>)</p></td>
</tr>
<tr class="row-odd"><td><p>Product Type</p></td>
<td><p>spectrum</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="fig-1-12">
<h3>Fig 1.12<a class="headerlink" href="#fig-1-12" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/mastp_adv_2.png"><img alt="The image shows the same advanced search pop-up, filled out with our desired criteria. The criteria is highlighted, and above it is a list of the applied filters highlighted in red. The top of the pop-up has a 'Search' button, and also lists the records found. There are two records for our search." src="../../../_images/mastp_adv_2.png" style="width: 900px;" /></a>
<p>Click the “Search” button (boxed in orange), and you will be brought to a page resembling Figure 1.13.</p>
</section>
<section id="fig-1-13">
<h3>Fig 1.13<a class="headerlink" href="#fig-1-13" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/mastp_res1.png"><img alt="The image shows the search results list, with consists of two rows for our search. To the left of the rows are checkboxes, then there is are images of a disk, spectra, and three dots. The rest of the columns of the rows show some criteria, such as the mission, observation type, etc. To the far right is the image of our object." src="../../../_images/mastp_res1.png" style="width: 900px;" /></a>
<p><font size="4"> <b>Above, in Fig 1.13</b>:</font></p>
<ul class="simple">
<li><p>The yellow box to the right shows the AstroView panel, where you can interactively explore the area around your target:</p>
<ul>
<li><p>Click and drag to pan around</p></li>
<li><p>Scroll to zoom in/out</p></li>
</ul>
</li>
<li><p>The dashed-blue box highlights additional filters you can use to narrow your search results.</p></li>
<li><p>The red box highlights a button you can click with <em>some</em> spectral datasets to pull up an interactive spectrum.</p></li>
<li><p>The green box highlights the “Mark” checkboxes for each dataset.</p></li>
<li><p>The black circle highlights the single dataset download button:</p>
<ul>
<li><p><strong>If you only need to download one or two datasets, you may simply click this button for each dataset</strong></p></li>
<li><p>Clicking the single dataset download button will attempt to open a “pop-up” window, which you must allow in order to download the file. Some browsers will require you to manually allow pop-ups.</p></li>
</ul>
</li>
</ul>
<p><a id="mastportSeriesD"></a></p>
</section>
</section>
<section id="searching-for-a-series-of-observations-on-the-mast-portal">
<h2>1.4. Searching for a Series of Observations on the MAST Portal<a class="headerlink" href="#searching-for-a-series-of-observations-on-the-mast-portal" title="Permalink to this heading">#</a></h2>
<p><font size="4"> <b>To download multiple datasets</b>:</font>
The MAST portal acts a bit like an online shopping website, where you add your <em>data products</em> to the checkout <em>cart</em>/<em>basket</em>, then open up your cart to <em>checkout</em> and download the files.</p>
<p>Using the checkboxes, mark all the datasets you wish to download (in this case, we’ll download both LCXV13040 and LCXV13050). Then, click the “Add data products to Download Basket” button (Fig 1.13, dashed-purple line), which will take you to a “Download Basket” screen resembling Figure 1.14:</p>
<section id="fig-1-14">
<h3>Fig 1.14<a class="headerlink" href="#fig-1-14" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="../../../_images/mastp_cart2.png"><img alt="The image shows the Download Manager. The left is a list of filters, where you can choose recommended products, product categories, extensions, and groups. To the left is a file list of all files for the observations. There are columns that label the file size, name, product type, etc." src="../../../_images/mastp_cart2.png" style="width: 900px;" /></a>
<p>Each dataset contains <em>many</em> files, most of which are calibration files or intermediate processing files. You may or may not want some of these intermediate files in addition to the final product file.
In the leftmost “Filters” section of the Download Basket page, you can narrow which files will be downloaded (Fig 1.14, boxed in red).
By default, only the <strong>minimum recommended products</strong> (<em>mrp</em>) will be selected. In the case of most COS data, this will be the final spectrum <code class="docutils literal notranslate"><span class="pre">x1dsum</span></code> file and association <code class="docutils literal notranslate"><span class="pre">asn</span></code> file for each dataset. The mrp files for the first dataset (<code class="docutils literal notranslate"><span class="pre">LCXV13040</span></code>) are highlighted in yellow. These two mrp filetypes are fine for our purposes here; however if you want to download files associated with specific exposures, or any calibration files or intermediate files, you can select those you wish to download with the checkboxes in the file tree system (Fig 1.14, dashed-green box).</p>
<p><strong>For this tutorial, we simply select “Minimum Recommended Products” at the top left. With this box checked, all of the folders representing individual exposures are no longer visible.</strong>
Check the box labelled “HST” to select all files included by the filters, and click the “Download Selected Items” button at the top right (Fig 1.14, dashed-black circle). This will bring up a small window asking you what format to download your files as. For datasets smaller than several Gigabytes, the <code class="docutils literal notranslate"><span class="pre">Zip</span></code> format will do fine. Click Download, and a pop-up window will try to open to download the files. If no download begins, make sure to enable this particular pop-up, or allow pop-ups on the MAST page.</p>
<p><strong>Your files should now be downloaded as a compressed <code class="docutils literal notranslate"><span class="pre">Zip</span></code> folder.</strong></p>
<p><a id = astroqueryD></a></p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="the-python-package-astroquery-mast">
<h1>2. The Python Package <code class="docutils literal notranslate"><span class="pre">astroquery.mast</span></code><a class="headerlink" href="#the-python-package-astroquery-mast" title="Permalink to this heading">#</a></h1>
<p>Another way to search for and download archived datasets is from within <code class="docutils literal notranslate"><span class="pre">Python</span></code> using the module <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/mast/mast.html"><code class="docutils literal notranslate"><span class="pre">astroquery.mast</span></code></a>. We will import one of this module’s key submodules: <code class="docutils literal notranslate"><span class="pre">Observations</span></code>.</p>
<p><em>Please note</em> that the canonical source of information on this package is the <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/"><code class="docutils literal notranslate"><span class="pre">astroquery</span></code> docs</a> - please look there for the most up-to-date instructions.</p>
<section id="we-will-import-the-following-packages">
<h2>We will import the following packages:<a class="headerlink" href="#we-will-import-the-following-packages" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">astroquery.mast</span></code>’s submodule <code class="docutils literal notranslate"><span class="pre">Observations</span></code> for finding and downloading data from the <a class="reference external" href="https://mast.stsci.edu/portal/Mashup/Clients/Mast/Portal.html">MAST</a> archive</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">csv</span></code>’s submodule <code class="docutils literal notranslate"><span class="pre">reader</span></code> for reading in/out from a <code class="docutils literal notranslate"><span class="pre">csv</span></code> file of source names.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">astroquery.mast</span><span class="w"> </span><span class="kn">import</span> <span class="n">Observations</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">csv</span><span class="w"> </span><span class="kn">import</span> <span class="n">reader</span>
</pre></div>
</div>
</div>
</div>
<p><a id=Astroquery1D></a></p>
</section>
<section id="searching-for-a-single-source-with-astroquery">
<h2>2.1. Searching for a single source with <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/"><code class="docutils literal notranslate"><span class="pre">Astroquery</span></code></a><a class="headerlink" href="#searching-for-a-single-source-with-astroquery" title="Permalink to this heading">#</a></h2>
<p>There are <em>many</em> options for searching the archive with <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/"><code class="docutils literal notranslate"><span class="pre">astroquery</span></code></a>, but we will begin with a very general search using the coordinates we found for WD1057+719 in the last section to find the dataset with the longest exposure time using the COS/FUV mode through the G160M filter. We could also search by object name to have it resolved to a set of coordinates, with the function <code class="docutils literal notranslate"><span class="pre">Observations.query_object(objectname</span> <span class="pre">=</span> <span class="pre">'3C48')</span></code>.</p>
<ul class="simple">
<li><p>Our coordinates were:      (11:00:34.126 +71:38:02.80).</p>
<ul>
<li><p>We can search these coordinates as sexagesimal coordinates, or convert them to decimal degrees.</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">WD_query</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">query_object</span><span class="p">(</span>
    <span class="c1"># Searching for objects within 5 arcseconds of coordinates</span>
    <span class="s2">&quot;11:00:34.126 +71:38:02.80&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="s2">&quot;5 sec&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This command has generated a table of objects called <strong>“WD_query”</strong>. We can see what information we have on the objects in the table by printing its <em><code class="docutils literal notranslate"><span class="pre">keys</span></code></em>, and see how many objects are in the table with <code class="docutils literal notranslate"><span class="pre">len(WD_query)</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;We have table information on </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">WD_query</span><span class="p">)</span><span class="si">}</span><span class="s2"> &quot;</span> <span class="o">+</span>
      <span class="s2">&quot;observations in the following categories/columns:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">WD_q_keys</span> <span class="o">=</span> <span class="p">(</span><span class="n">WD_query</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">WD_q_keys</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>We have table information on 1070 observations in the following categories/columns:
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;intentType&#39;,
 &#39;obs_collection&#39;,
 &#39;provenance_name&#39;,
 &#39;instrument_name&#39;,
 &#39;project&#39;,
 &#39;filters&#39;,
 &#39;wavelength_region&#39;,
 &#39;target_name&#39;,
 &#39;target_classification&#39;,
 &#39;obs_id&#39;,
 &#39;s_ra&#39;,
 &#39;s_dec&#39;,
 &#39;dataproduct_type&#39;,
 &#39;proposal_pi&#39;,
 &#39;calib_level&#39;,
 &#39;t_min&#39;,
 &#39;t_max&#39;,
 &#39;t_exptime&#39;,
 &#39;em_min&#39;,
 &#39;em_max&#39;,
 &#39;obs_title&#39;,
 &#39;t_obs_release&#39;,
 &#39;proposal_id&#39;,
 &#39;proposal_type&#39;,
 &#39;sequence_number&#39;,
 &#39;s_region&#39;,
 &#39;jpegURL&#39;,
 &#39;dataURL&#39;,
 &#39;dataRights&#39;,
 &#39;mtFlag&#39;,
 &#39;srcDen&#39;,
 &#39;obsid&#39;,
 &#39;distance&#39;]
</pre></div>
</div>
</div>
</div>
<p><a id=NarrowSearchD></a></p>
</section>
<section id="narrowing-search-with-observational-parameters">
<h2>2.2. Narrowing Search with Observational Parameters<a class="headerlink" href="#narrowing-search-with-observational-parameters" title="Permalink to this heading">#</a></h2>
<p>Now we narrow down a bit with some additional parameters and sort by exposure time.
The parameter limits we add to the search are:</p>
<ul class="simple">
<li><p><em>Only look for sources in the coordinate range between right ascension 165 to 166 degrees and declination +71 to +72 degrees</em></p></li>
<li><p><em>Only find observations in the UV</em></p></li>
<li><p><em>Only find observations taken with the COS instrument (either in its FUV or NUV configuration).</em></p></li>
<li><p><em>Only find spectrographic observations</em></p></li>
<li><p><em>Only find observations made using the COS grating “G160M”</em></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Searching MAST for objects with our desired parameter values</span>
<span class="n">WD_query_narrow</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span>
                                      <span class="n">s_ra</span><span class="o">=</span><span class="p">[</span><span class="mf">165.</span><span class="p">,</span> <span class="mf">166.</span><span class="p">],</span>
                                      <span class="n">s_dec</span><span class="o">=</span><span class="p">[</span><span class="o">+</span><span class="mf">71.</span><span class="p">,</span> <span class="o">+</span><span class="mf">72.</span><span class="p">],</span>
                                      <span class="n">wavelength_region</span><span class="o">=</span><span class="s2">&quot;UV&quot;</span><span class="p">,</span>
                                      <span class="n">instrument_name</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;COS/NUV&quot;</span><span class="p">,</span> <span class="s2">&quot;COS/FUV&quot;</span><span class="p">],</span>
                                      <span class="n">dataproduct_type</span><span class="o">=</span><span class="s2">&quot;spectrum&quot;</span><span class="p">,</span>
                                      <span class="n">filters</span><span class="o">=</span><span class="s1">&#39;G160M&#39;</span><span class="p">)</span>

<span class="c1"># Next lines simplifies the columns of data we see to some useful data</span>
<span class="n">col_data</span> <span class="o">=</span> <span class="n">WD_query_narrow</span><span class="p">[</span>
                <span class="s1">&#39;obsid&#39;</span><span class="p">,</span>
                <span class="s1">&#39;obs_id&#39;</span><span class="p">,</span>
                <span class="s1">&#39;target_name&#39;</span><span class="p">,</span>
                <span class="s1">&#39;dataproduct_type&#39;</span><span class="p">,</span>
                <span class="s1">&#39;instrument_name&#39;</span><span class="p">,</span>
                <span class="s1">&#39;project&#39;</span><span class="p">,</span>
                <span class="s1">&#39;filters&#39;</span><span class="p">,</span>
                <span class="s1">&#39;wavelength_region&#39;</span><span class="p">,</span>
                <span class="s1">&#39;t_exptime&#39;</span><span class="p">]</span>

<span class="c1"># This is the index list in order of exposure time, increasing</span>
<span class="n">sort_order</span> <span class="o">=</span> <span class="n">WD_query_narrow</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="s1">&#39;t_exptime&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">col_data</span><span class="p">[</span><span class="n">sort_order</span><span class="p">])</span>

<span class="n">chosenObs</span> <span class="o">=</span> <span class="n">col_data</span><span class="p">[</span><span class="n">sort_order</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Grab the last value of the sorted list</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">The longest COS/FUV exposure with the G160M filter is:&quot;</span> <span class="o">+</span>
      <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="si">{</span><span class="n">chosenObs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  obsid     obs_id  target_name ... filters wavelength_region     t_exptime     
--------- --------- ----------- ... ------- ----------------- ------------------
 26242800 ldyr52030  WD1057+719 ...   G160M                UV                0.0
 24843807 lbn133010  WD1057+719 ...   G160M                UV                0.0
 24140064 lbe702iqs  WD1057+719 ...   G160M                UV                1.0
 24139534 lbb917k7q  WD1057+719 ...   G160M                UV                1.0
 24139542 lbb918scq  WD1057+719 ...   G160M                UV                1.0
 24139526 lbb916lbq  WD1057+719 ...   G160M                UV                1.0
 24134176 la9r02dfq WD-1057+719 ...   G160M                UV                1.0
216643132 lf4g07b9q  WD1057+719 ...   G160M                UV                1.0
216643126 lf4g07b8q  WD1057+719 ...   G160M                UV                1.0
 24139587 lbb9x3ckq  WD1057+719 ...   G160M                UV                1.0
      ...       ...         ... ...     ...               ...                ...
 24843884 lbnm01020 WD-1057+719 ...   G160M                UV 2850.2079999999996
 24843894 lbnm03020  WD1057+719 ...   G160M                UV           2900.608
 24140062 lbe702ios  WD1057+719 ...   G160M                UV             3179.0
 24843893 lbnm03010  WD1057+719 ...   G160M                UV           3200.768
 24839998 la9r02010 WD-1057+719 ...   G160M                UV           3280.128
 24843887 lbnm01050 WD-1057+719 ...   G160M                UV           3350.368
 24843896 lbnm03040  WD1057+719 ...   G160M                UV             3500.0
 24843897 lbnm03050  WD1057+719 ...   G160M                UV             3700.8
 24842491 lbek02010  WD1057+719 ...   G160M                UV             4252.0
 24842492 lbek02020  WD1057+719 ...   G160M                UV  5401.599999999999
Length = 193 rows


The longest COS/FUV exposure with the G160M filter is:

 obsid     obs_id  target_name dataproduct_type instrument_name project filters wavelength_region     t_exptime    
-------- --------- ----------- ---------------- --------------- ------- ------- ----------------- -----------------
24842492 lbek02020  WD1057+719         spectrum         COS/FUV     HST   G160M                UV 5401.599999999999
</pre></div>
</div>
</div>
</div>
<p><font size="5">Caution! </font></p>
<a class="reference internal image-reference" href="../../../_images/warning1.png"><img alt="This image is a warning symbol." src="../../../_images/warning1.png" style="width: 60px;" /></a>
<p>Please note that these queries are <code class="docutils literal notranslate"><span class="pre">Astropy</span></code> tables and do not always respond as expected for other data structures like <code class="docutils literal notranslate"><span class="pre">Pandas</span> <span class="pre">DataFrames</span></code>. For instance, the first way of filtering a table shown below is correct, but the second will consistently produce the <em>wrong result</em>. You <em>must</em> search and filter these tables by masking them, as in the first example below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Searching a table generated with a query</span>
<span class="c1"># First, correct way using masking</span>
<span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">WD_query</span><span class="p">[</span><span class="s1">&#39;obs_id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;lbbd01020&#39;</span><span class="p">)</span>  <span class="c1"># NOTE, obs_id must be lower-case</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Correct way yields: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">WD_query</span><span class="p">[</span><span class="n">mask</span><span class="p">][</span><span class="s1">&#39;obs_id&#39;</span><span class="p">],</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Second INCORRECT way, done with Pandas DataFrames data structures</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Incorrect way yields: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
      <span class="n">WD_query</span><span class="p">[</span><span class="s1">&#39;obs_id&#39;</span> <span class="o">==</span> <span class="s1">&#39;LBBD01020&#39;</span><span class="p">][</span><span class="s1">&#39;obs_id&#39;</span><span class="p">],</span>
      <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">which is NOT what we&#39;re looking for!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Correct way yields: 
   obs_id 
---------
lbbd01020 


Incorrect way yields: 
 tess-s0014-4-3 
which is NOT what we&#39;re looking for!
</pre></div>
</div>
</div>
</div>
<p><a id=dataprodsD></a></p>
</section>
<section id="choosing-and-downloading-data-products">
<h2>2.3. Choosing and Downloading Data Products<a class="headerlink" href="#choosing-and-downloading-data-products" title="Permalink to this heading">#</a></h2>
<p><strong>Now we can choose and download our data products from the archive dataset.</strong></p>
<p>We will first generate a list of data products in the dataset: <code class="docutils literal notranslate"><span class="pre">product_list</span></code>. This will generate a large list, but we will only show the first 10 values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">product_list</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">get_product_list</span><span class="p">(</span><span class="n">chosenObs</span><span class="p">)</span>
<span class="c1"># Not the whole dataset, just first 10 lines/observations</span>
<span class="n">product_list</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><i>Table masked=True length=10</i>
<table id="table140394431655632" class="table-striped table-bordered table-condensed">
<thead><tr><th>obsID</th><th>obs_collection</th><th>dataproduct_type</th><th>obs_id</th><th>description</th><th>type</th><th>dataURI</th><th>productType</th><th>productGroupDescription</th><th>productSubGroupDescription</th><th>productDocumentationURL</th><th>project</th><th>prvversion</th><th>proposal_id</th><th>productFilename</th><th>size</th><th>parent_obsid</th><th>dataRights</th><th>calib_level</th><th>filters</th></tr></thead>
<thead><tr><th>str9</th><th>str3</th><th>str8</th><th>str34</th><th>str62</th><th>str1</th><th>str70</th><th>str9</th><th>str28</th><th>str12</th><th>str1</th><th>str6</th><th>str5</th><th>str5</th><th>str48</th><th>int64</th><th>str8</th><th>str6</th><th>int64</th><th>str5</th></tr></thead>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS CTA file - Corrected events COS segment A</td><td>S</td><td>mast:HST/product/lbek02o4q_corrtag_a.fits</td><td>AUXILIARY</td><td>--</td><td>CORRTAG_A</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_corrtag_a.fits</td><td>49066560</td><td>24842492</td><td>PUBLIC</td><td>1</td><td>G160M</td></tr>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS CTB file - Corrected events COS segment B</td><td>S</td><td>mast:HST/product/lbek02o4q_corrtag_b.fits</td><td>AUXILIARY</td><td>--</td><td>CORRTAG_B</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_corrtag_b.fits</td><td>160911360</td><td>24842492</td><td>PUBLIC</td><td>1</td><td>G160M</td></tr>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS CNA file - Counts COS segment A</td><td>S</td><td>mast:HST/product/lbek02o4q_counts_a.fits</td><td>AUXILIARY</td><td>--</td><td>COUNTS_A</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_counts_a.fits</td><td>167823360</td><td>24842492</td><td>PUBLIC</td><td>1</td><td>G160M</td></tr>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS CNB file - Counts COS segment B</td><td>S</td><td>mast:HST/product/lbek02o4q_counts_b.fits</td><td>AUXILIARY</td><td>--</td><td>COUNTS_B</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_counts_b.fits</td><td>167823360</td><td>24842492</td><td>PUBLIC</td><td>1</td><td>G160M</td></tr>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS FLA file - Calibrated exposure COS segment A</td><td>S</td><td>mast:HST/product/lbek02o4q_flt_a.fits</td><td>AUXILIARY</td><td>--</td><td>FLT_A</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_flt_a.fits</td><td>167823360</td><td>24842492</td><td>PUBLIC</td><td>2</td><td>G160M</td></tr>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS FLB file - Calibrated exposure COS segment B</td><td>S</td><td>mast:HST/product/lbek02o4q_flt_b.fits</td><td>AUXILIARY</td><td>--</td><td>FLT_B</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_flt_b.fits</td><td>167823360</td><td>24842492</td><td>PUBLIC</td><td>2</td><td>G160M</td></tr>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS LPF file - LampFlash exposure COS</td><td>S</td><td>mast:HST/product/lbek02o4q_lampflash.fits</td><td>AUXILIARY</td><td>--</td><td>LAMPFLASH</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_lampflash.fits</td><td>699840</td><td>24842492</td><td>PUBLIC</td><td>1</td><td>G160M</td></tr>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS RTA file - Raw events COS segment A</td><td>S</td><td>mast:HST/product/lbek02o4q_rawtag_a.fits</td><td>AUXILIARY</td><td>--</td><td>RAWTAG_A</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_rawtag_a.fits</td><td>11347200</td><td>24842492</td><td>PUBLIC</td><td>1</td><td>G160M</td></tr>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS RTB file - Raw events COS segment B</td><td>S</td><td>mast:HST/product/lbek02o4q_rawtag_b.fits</td><td>AUXILIARY</td><td>--</td><td>RAWTAG_B</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_rawtag_b.fits</td><td>37157760</td><td>24842492</td><td>PUBLIC</td><td>1</td><td>G160M</td></tr>
<tr><td>24140170</td><td>HST</td><td>spectrum</td><td>lbek02o4q</td><td>DADS SPT file - Engineering telemetry ACS/WFC3/NICMOS/COS/STIS</td><td>S</td><td>mast:HST/product/lbek02o4q_spt.fits</td><td>AUXILIARY</td><td>--</td><td>SPT</td><td>--</td><td>CALCOS</td><td>3.6.0</td><td>12086</td><td>lbek02o4q_spt.fits</td><td>414720</td><td>24842492</td><td>PUBLIC</td><td>1</td><td>G160M</td></tr>
</table></div></div></div>
</div>
<p>Now, we will download <em>just the</em> <strong>minimum recommended products</strong> (<em>mrp</em>) which are the fully calibrated spectrum (denoted by the suffix <code class="docutils literal notranslate"><span class="pre">_x1d</span></code> or here <code class="docutils literal notranslate"><span class="pre">x1dsum</span></code>) and the association file (denoted by the suffix <code class="docutils literal notranslate"><span class="pre">_asn</span></code>). We do this by setting the parameter <code class="docutils literal notranslate"><span class="pre">mrp_only</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>. The association file contains no data, but rather the metadata explaining which exposures produced the <code class="docutils literal notranslate"><span class="pre">x1dsum</span></code> dataset. The <code class="docutils literal notranslate"><span class="pre">x1dsum</span></code> file is the final product summed across all of the <a class="reference external" href="https://hst-docs.stsci.edu/cosdhb/chapter-1-cos-overview/1-1-instrument-capabilities-and-design#id-1.1InstrumentCapabilitiesandDesign-GratingOffset(FP-POS)GratingOffsetPositions(FP-POS)">fixed pattern noise positions</a> (<code class="docutils literal notranslate"><span class="pre">FP-POS</span></code>). The <code class="docutils literal notranslate"><span class="pre">x1d</span></code> and <code class="docutils literal notranslate"><span class="pre">x1dsum&lt;n&gt;</span></code> files are intermediate spectra. Much more information can be found in the <a class="reference external" href="https://hst-docs.stsci.edu/display/COSIHB/">COS Instrument Handbook</a>.</p>
<p>We would set <code class="docutils literal notranslate"><span class="pre">mrp_only</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>, if we wanted to download <em><strong>all</strong></em> the data from the observation, including:</p>
<ul class="simple">
<li><p>Support files such as the spacecraft’s pointing data over time (<code class="docutils literal notranslate"><span class="pre">jit</span></code> files).</p></li>
<li><p>Intermediate data products such as calibrated TIME-TAG data (<code class="docutils literal notranslate"><span class="pre">corrtag</span></code> or <code class="docutils literal notranslate"><span class="pre">corrtag_a</span></code>/<code class="docutils literal notranslate"><span class="pre">corrtag_b</span></code> files) and extracted 1-dimensional spectra averaged over exposures with a specific <code class="docutils literal notranslate"><span class="pre">FP-POS</span></code> value (<code class="docutils literal notranslate"><span class="pre">x1dsum</span></code> files).</p></li>
</ul>
<a class="reference internal image-reference" href="../../../_images/warning1.png"><img alt="This image is a warning symbol." src="../../../_images/warning1.png" style="width: 60px;" /></a>
<p>However, use caution with downloading all files, as in this case, setting <code class="docutils literal notranslate"><span class="pre">mrp_only</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> results in the transfer of <strong>7 Gigabytes</strong> of data, which can take a long time to transfer and eat away at your computer’s storage! In general, only download the files you need. On the other hand, often researchers will download only the raw data, so that they can process it for themselves. Since here we only need the final <code class="docutils literal notranslate"><span class="pre">x1dsum</span></code> and <code class="docutils literal notranslate"><span class="pre">asn</span></code> files, we only need to download 2 Megabytes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">downloads</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">download_products</span><span class="p">(</span>
                            <span class="n">product_list</span><span class="p">,</span>
                            <span class="n">download_dir</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">data_dir</span><span class="p">),</span>
                            <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;fits&#39;</span><span class="p">,</span>
                            <span class="n">mrp_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">cache</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/lbek02020_asn.fits to data/mastDownload/HST/lbek02020/lbek02020_asn.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/lbek02020_x1dsum.fits to data/mastDownload/HST/lbek02020/lbek02020_x1dsum.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
</div>
</div>
<section id="exercise-2-download-the-raw-counts-data-on-trappist-1">
<h3>Exercise 2: <em>Download the raw counts data on TRAPPIST-1</em><a class="headerlink" href="#exercise-2-download-the-raw-counts-data-on-trappist-1" title="Permalink to this heading">#</a></h3>
<p>In the previous exercise, we found an observation COS took on TRAPPIST-1 system. In case you skipped Exercise 1, the observation’s Dataset ID is <code class="docutils literal notranslate"><span class="pre">LDLM40010</span></code>.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">Astroquery.mast</span></code> to download the raw <code class="docutils literal notranslate"><span class="pre">TIME-TAG</span></code> data, rather than the <code class="docutils literal notranslate"><span class="pre">x1d</span></code> spectra files. See the <a class="reference external" href="https://hst-docs.stsci.edu/cosdhb/chapter-2-cos-data-files/2-4-cos-data-products">COS Data Handbook Ch. 2</a> for details on TIME-TAG data files. Make sure to get the data from both segments of the FUV detector (i.e. both <code class="docutils literal notranslate"><span class="pre">RAWTAG_A</span></code> and <code class="docutils literal notranslate"><span class="pre">RAWTAG_B</span></code> files). If you do this correctly, there should be five data files for each detector segment.</p>
<p><em>Note that some of the <code class="docutils literal notranslate"><span class="pre">obs_id</span></code> may appear in the table as slightly different, i.e.: ldlm40alq and ldlm40axq, rather than ldlm40010. The main <code class="docutils literal notranslate"><span class="pre">obs_id</span></code> they fall under is still ldlm40010, and this will still work as a search term. They are linked together by the association file described here in Section 2.3.</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer here</span>
</pre></div>
</div>
</div>
</div>
<p><a id=Astroquery2D></a></p>
</section>
</section>
<section id="using-astroquery-to-find-data-on-a-series-of-sources">
<h2>2.4. Using astroquery to find data on a series of sources<a class="headerlink" href="#using-astroquery-to-find-data-on-a-series-of-sources" title="Permalink to this heading">#</a></h2>
<p>In this case, we’ll look for COS data around several bright globular clusters:</p>
<ul class="simple">
<li><p>Omega Centauri</p></li>
<li><p>M5</p></li>
<li><p>M13</p></li>
<li><p>M15</p></li>
<li><p>M53</p></li>
</ul>
<p>We will first write a comma-separated-value (<code class="docutils literal notranslate"><span class="pre">csv</span></code>) file <code class="docutils literal notranslate"><span class="pre">objectname_list.csv</span></code> listing these sources by their common name. This is a bit redundant here, as we will immediately read back in what we have written; however it is done here to deliberately teach both sides of the writing/reading process, and as many users will find themselves with a <code class="docutils literal notranslate"><span class="pre">csv</span></code> sourcelist they must search.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The 5 sources we want to look for</span>
<span class="n">sourcelist</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;omega Centauri&#39;</span><span class="p">,</span> <span class="s1">&#39;M5&#39;</span><span class="p">,</span> <span class="s1">&#39;M13&#39;</span><span class="p">,</span> <span class="s1">&#39;M15&#39;</span><span class="p">,</span> <span class="s1">&#39;M53&#39;</span><span class="p">]</span>

<span class="c1"># Open this new file in &quot;write&quot; mode</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./objectname_list.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># We want a comma after each source name except the last one</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sourcelist</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">item</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>
    <span class="c1"># No comma after the last entry</span>
    <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">sourcelist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Open the file we just wrote in &quot;read&quot; mode</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./objectname_list.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvFile</span><span class="p">:</span>
    <span class="c1"># This is the exact same list as `sourcelist`!</span>
    <span class="n">objList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">reader</span><span class="p">(</span><span class="n">csvFile</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input csv file contained the following sources:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">objList</span><span class="p">)</span>

<span class="c1"># Make a dictionary, where each source name</span>
<span class="c1"># corresponds to a list of its observations with COS</span>
<span class="n">globular_cluster_queries</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># Each &quot;obj&quot; is a source name</span>
<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objList</span><span class="p">:</span>
    <span class="n">query_x</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span>
                            <span class="n">objectname</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
                            <span class="c1"># Query the area in +/- 5 arcminutes</span>
                            <span class="n">radius</span><span class="o">=</span><span class="s2">&quot;5 min&quot;</span><span class="p">,</span>
                            <span class="n">instrument_name</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;COS/FUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COS/NUV&#39;</span><span class="p">])</span>
    <span class="c1"># Add this entry to the dictionary</span>
    <span class="n">globular_cluster_queries</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">query_x</span><span class="p">)</span>

<span class="c1"># Show the dictionary</span>
<span class="n">globular_cluster_queries</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The input csv file contained the following sources:
 [&#39;omega Centauri&#39;, &#39;M5&#39;, &#39;M13&#39;, &#39;M15&#39;, &#39;M53&#39;]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;omega Centauri&#39;: &lt;Table masked=True length=75&gt;
  intentType obs_collection provenance_name ...   objID1       distance     
    str11         str3            str6      ...    str9        float64      
 ----------- -------------- --------------- ... --------- ------------------
     science            HST          CALCOS ... 144543950  80.41849226238708
     science            HST          CALCOS ... 891482578 100.50819877743416
     science            HST          CALCOS ... 891493137  79.19208944309166
 calibration            HST          CALCOS ... 892025902  9.428923073553836
 calibration            HST          CALCOS ... 892059638  193.9128347260281
 calibration            HST          CALCOS ... 892063489 214.42042069180044
 calibration            HST          CALCOS ... 892136363  7.281158601888065
 calibration            HST          CALCOS ... 907314810  7.044245996886498
 calibration            HST          CALCOS ... 177838558 291.39123589625325
         ...            ...             ... ...       ...                ...
 calibration            HST          CALCOS ... 891746257  58.86426768198804
 calibration            HST          CALCOS ... 891746259  58.86426768198804
 calibration            HST          CALCOS ... 891859989 15.453456111727432
 calibration            HST          CALCOS ... 892063448 214.42042069180044
 calibration            HST          CALCOS ... 892070998  80.27227595394012
 calibration            HST          CALCOS ... 892115850  200.4526386749592
 calibration            HST          CALCOS ... 892115871  200.4526386749592
 calibration            HST          CALCOS ... 892115895 195.25596036460323
 calibration            HST          CALCOS ... 892115909 211.69154377662423
 calibration            HST          CALCOS ... 907295656 15.453456111727432,
 &#39;M5&#39;: &lt;Table masked=True length=11&gt;
  intentType obs_collection provenance_name ...   objID1       distance    
    str11         str3            str6      ...    str9        float64     
 ----------- -------------- --------------- ... --------- -----------------
     science            HST          CALCOS ... 891428315 61.83368183652463
     science            HST          CALCOS ... 891430055 61.83368183652463
     science            HST          CALCOS ... 891430056 61.83368183652463
     science            HST          CALCOS ... 891430064 61.83368183652463
     science            HST          CALCOS ... 891430093 61.83368183652463
 calibration            HST          CALCOS ... 891467608 43.78072828578765
 calibration            HST          CALCOS ... 891467618 43.78072828578765
 calibration            HST          CALCOS ... 891467619 43.78072828578765
 calibration            HST          CALCOS ... 891472009 43.78072828578765
 calibration            HST          CALCOS ... 892064959 21.45221727319495
 calibration            HST          CALCOS ... 892071582  13.5181312584415,
 &#39;M13&#39;: &lt;Table masked=True length=5&gt;
 intentType obs_collection provenance_name ...   objID1       distance     
    str7         str3            str6      ...    str9        float64      
 ---------- -------------- --------------- ... --------- ------------------
    science            HST          CALCOS ... 891410120  132.1139463852337
    science            HST          CALCOS ... 891410125  132.1139463852337
    science            HST          CALCOS ... 891553894 132.11394638529515
    science            HST          CALCOS ... 891410117  132.1139463852337
    science            HST          CALCOS ... 891432587 132.11394638529515,
 &#39;M15&#39;: &lt;Table masked=True length=15&gt;
  intentType obs_collection provenance_name ...   objID1       distance     
    str11         str3            str6      ...    str9        float64      
 ----------- -------------- --------------- ... --------- ------------------
 calibration            HST          CALCOS ... 807454205   2.36886205818078
     science            HST          CALCOS ... 891413270  28.10036224887859
     science            HST          CALCOS ... 891413275 100.13025803330383
     science            HST          CALCOS ... 891413277 100.13025803330383
     science            HST          CALCOS ... 891430247  28.10036224918268
     science            HST          CALCOS ... 891432602  28.10036224918268
 calibration            HST          CALCOS ... 892165217  2.531386666718452
 calibration            HST          CALCOS ... 892170320 2.1508743970846966
 calibration            HST          CALCOS ... 892170324 2.2226553719874356
     science            HST          CALCOS ... 891410118 100.13025803330383
     science            HST          CALCOS ... 891413273  28.10036224887859
     science            HST          CALCOS ... 891430866 100.13025803285203
     science            HST          CALCOS ... 891413267  28.10036224887859
     science            HST          CALCOS ... 891430873 100.13025803285203
 calibration            HST          CALCOS ... 892170353 2.4852321072857024,
 &#39;M53&#39;: &lt;Table masked=True length=3&gt;
 intentType obs_collection provenance_name ...   objID1       distance     
    str7         str3            str6      ...    str9        float64      
 ---------- -------------- --------------- ... --------- ------------------
    science            HST          CALCOS ... 144560171  261.4442173334648
    science            HST          CALCOS ... 891695738 262.69384754127606
    science            HST          CALCOS ... 891699898 262.69384754127606}
</pre></div>
</div>
</div>
</div>
<p><strong>Excellent! You’ve now done the hardest part - finding and downloading the right data.</strong> From here, it’s generally straightforward to read in and plot the spectrum. We recommend you look into our tutorial on <a class="reference external" href="https://github.com/spacetelescope/hst_notebooks/blob/main/notebooks/COS/ViewData/ViewData.ipynb">Viewing a COS Spectrum</a>.</p>
</section>
<section id="congratulations-you-finished-this-notebook">
<h2>Congratulations! You finished this Notebook!<a class="headerlink" href="#congratulations-you-finished-this-notebook" title="Permalink to this heading">#</a></h2>
<section id="there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here">
<h3>There are more COS data walkthrough Notebooks on different topics. You can find them <a class="reference external" href="https://github.com/spacetelescope/hst_notebooks/tree/main/notebooks/COS">here</a>.<a class="headerlink" href="#there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here" title="Permalink to this heading">#</a></h3>
<hr>
## About this Notebook
**Author:** Nat Kerman <nkerman@stsci.edu>
<p><strong>Updated On:</strong> 2023-03-24</p>
<blockquote>
<div><p><em>This tutorial was generated to be in compliance with the <a class="reference external" href="https://github.com/spacetelescope/style-guides">STScI style guides</a> and would like to cite the <a class="reference external" href="https://github.com/spacetelescope/style-guides/blob/master/templates/example_notebook.ipynb">Jupyter guide</a> in particular.</em></p>
</div></blockquote>
</section>
</section>
<section id="citations">
<h2>Citations<a class="headerlink" href="#citations" title="Permalink to this heading">#</a></h2>
<p>If you use <code class="docutils literal notranslate"><span class="pre">astropy</span></code>, <code class="docutils literal notranslate"><span class="pre">astroquery</span></code>, or <code class="docutils literal notranslate"><span class="pre">numpy</span></code> for published research, please cite the
authors. Follow these links for more information about citations:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.astropy.org/en/stable/index.html">Citing <code class="docutils literal notranslate"><span class="pre">astropy</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/citing-numpy/">Citing <code class="docutils literal notranslate"><span class="pre">numpy</span></code></a></p></li>
<li><p><a class="reference external" href="https://astroquery.readthedocs.io/en/latest/">Citing <code class="docutils literal notranslate"><span class="pre">astroquery</span></code></a></p></li>
</ul>
<hr>
<p><span class="xref myst">Top of Page</span>
<a class="reference internal" href="https://raw.githubusercontent.com/spacetelescope/notebooks/master/assets/stsci_pri_combo_mark_horizonal_white_bkgd.png"><img alt="Space Telescope Logo" src="https://raw.githubusercontent.com/spacetelescope/notebooks/master/assets/stsci_pri_combo_mark_horizonal_white_bkgd.png" style="width: 200px;" /></a></p>
<p><br></br>
<br></br>
<br></br></p>
</section>
<section id="exercise-solutions">
<h2>Exercise Solutions:<a class="headerlink" href="#exercise-solutions" title="Permalink to this heading">#</a></h2>
<p>Note, that for many of these, there are multiple ways to get an answer.</p>
<p><strong>We will import:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> to handle array functions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astropy.table</span></code> Table for reading in and creating tidy tables of the data</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy.table</span><span class="w"> </span><span class="kn">import</span> <span class="n">Table</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ex. 1 solution:</span>
<span class="n">dataset_id_</span> <span class="o">=</span> <span class="s1">&#39;LDLM40010&#39;</span>
<span class="n">exptime_</span> <span class="o">=</span> <span class="mf">12403.904</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The TRAPPIST-1 COS data is in dataset </span><span class="si">{</span><span class="n">dataset_id_</span><span class="si">}</span><span class="s2">,&quot;</span> <span class="o">+</span>
      <span class="sa">f</span><span class="s2">&quot; taken with an exosure time of </span><span class="si">{</span><span class="n">exptime_</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The TRAPPIST-1 COS data is in dataset LDLM40010, taken with an exosure time of 12403.904
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ex. 2 solution:</span>
<span class="n">query_3</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span>
                        <span class="n">obs_id</span><span class="o">=</span><span class="s1">&#39;LDLM40010&#39;</span><span class="p">,</span>
                        <span class="n">wavelength_region</span><span class="o">=</span><span class="s2">&quot;UV&quot;</span><span class="p">,</span>
                        <span class="n">instrument_name</span><span class="o">=</span><span class="s2">&quot;COS/FUV&quot;</span><span class="p">,</span>
                        <span class="n">filters</span><span class="o">=</span><span class="s1">&#39;G130M&#39;</span><span class="p">)</span>

<span class="n">product_list2</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">get_product_list</span><span class="p">(</span><span class="n">query_3</span><span class="p">)</span>
<span class="n">rawRowsA</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">product_list2</span><span class="p">[</span><span class="s1">&#39;productSubGroupDescription&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;RAWTAG_A&quot;</span><span class="p">)</span>
<span class="n">rawRowsB</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">product_list2</span><span class="p">[</span><span class="s1">&#39;productSubGroupDescription&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;RAWTAG_B&quot;</span><span class="p">)</span>
<span class="n">rawRows</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rawRowsA</span><span class="p">,</span> <span class="n">rawRowsB</span><span class="p">)</span>
<span class="o">!</span>mkdir<span class="w"> </span>./data/Ex2/
<span class="n">downloads2</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">download_products</span><span class="p">(</span>
                            <span class="n">product_list2</span><span class="p">[</span><span class="n">rawRows</span><span class="p">],</span>
                            <span class="n">download_dir</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">data_dir</span><span class="o">/</span><span class="s1">&#39;Ex2/&#39;</span><span class="p">),</span>
                            <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;fits&#39;</span><span class="p">,</span>
                            <span class="n">mrp_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">downloads3</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">download_products</span><span class="p">(</span>
                            <span class="n">product_list2</span><span class="p">,</span>
                            <span class="n">download_dir</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">data_dir</span><span class="o">/</span><span class="s1">&#39;Ex2/&#39;</span><span class="p">),</span>
                            <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;fits&#39;</span><span class="p">,</span>
                            <span class="n">mrp_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">asn_data</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span>
    <span class="s1">&#39;./data/Ex2/mastDownload/HST/ldlm40010/ldlm40010_asn.fits&#39;</span><span class="p">,</span> <span class="n">hdu</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">asn_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40alq_rawtag_a.fits to data/Ex2/mastDownload/HST/ldlm40alq/ldlm40alq_rawtag_a.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40alq_rawtag_b.fits to data/Ex2/mastDownload/HST/ldlm40alq/ldlm40alq_rawtag_b.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40axq_rawtag_a.fits to data/Ex2/mastDownload/HST/ldlm40axq/ldlm40axq_rawtag_a.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40axq_rawtag_b.fits to data/Ex2/mastDownload/HST/ldlm40axq/ldlm40axq_rawtag_b.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40blq_rawtag_a.fits to data/Ex2/mastDownload/HST/ldlm40blq/ldlm40blq_rawtag_a.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40blq_rawtag_b.fits to data/Ex2/mastDownload/HST/ldlm40blq/ldlm40blq_rawtag_b.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40c2q_rawtag_a.fits to data/Ex2/mastDownload/HST/ldlm40c2q/ldlm40c2q_rawtag_a.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40c2q_rawtag_b.fits to data/Ex2/mastDownload/HST/ldlm40c2q/ldlm40c2q_rawtag_b.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40d2q_rawtag_a.fits to data/Ex2/mastDownload/HST/ldlm40d2q/ldlm40d2q_rawtag_a.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40d2q_rawtag_b.fits to data/Ex2/mastDownload/HST/ldlm40d2q/ldlm40d2q_rawtag_b.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40010_asn.fits to data/Ex2/mastDownload/HST/ldlm40010/ldlm40010_asn.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ldlm40010_x1dsum.fits to data/Ex2/mastDownload/HST/ldlm40010/ldlm40010_x1dsum.fits ...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [Done]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   MEMNAME        MEMTYPE     MEMPRSNT
-------------- -------------- --------
     LDLM40ALQ         EXP-FP        1
     LDLM40AXQ         EXP-FP        1
     LDLM40BLQ         EXP-FP        1
     LDLM40C2Q         EXP-FP        1
     LDLM40D2Q         EXP-FP        1
     LDLM40010        PROD-FP        1
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "spacetelescope/hst_notebooks",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks/COS/DataDl"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../Setup/Setup.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Setting up your computer environment for working with COS data</p>
      </div>
    </a>
    <a class="right-next"
       href="../ViewData/ViewData.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Viewing COS Data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Downloading COS Data</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning Goals</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">0. Introduction</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#choosing-how-to-access-the-data">0.1. Choosing how to access the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-one-cell-summary-of-this-notebook-s-key-points">0.2. A one-cell summary of this Notebook’s key points:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#now-returning-to-our-more-detailed-walkthrough">Now, returning to our more detailed walkthrough…</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-the-data-through-the-browser-interface">1. Downloading the data through the browser interface</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-hst-specific-web-search">1.1 The HST-specific Web Search</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-1">Fig 1.1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-2">Fig 1.2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-3">Fig 1.3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-4">Fig 1.4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-5">Fig 1.5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-6">Fig 1.6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-7">Fig 1.7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-searching-the-archive-for-trappist-1-data">Exercise 1: <em>Searching the archive for TRAPPIST-1 data</em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-a-series-of-observations-on-the-hst-specific-web-search">1.2. Searching for a Series of Observations on the HST-specific Web Search</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-8">Fig 1.8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-9">Fig 1.9</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-mast-portal">1.3. The MAST Portal</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-10">Fig 1.10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-11">Fig 1.11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-12">Fig 1.12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-13">Fig 1.13</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-a-series-of-observations-on-the-mast-portal">1.4. Searching for a Series of Observations on the MAST Portal</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-1-14">Fig 1.14</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#the-python-package-astroquery-mast">2. The Python Package <code class="docutils literal notranslate"><span class="pre">astroquery.mast</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#we-will-import-the-following-packages">We will import the following packages:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-a-single-source-with-astroquery">2.1. Searching for a single source with <code class="docutils literal notranslate"><span class="pre">Astroquery</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#narrowing-search-with-observational-parameters">2.2. Narrowing Search with Observational Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#choosing-and-downloading-data-products">2.3. Choosing and Downloading Data Products</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-download-the-raw-counts-data-on-trappist-1">Exercise 2: <em>Download the raw counts data on TRAPPIST-1</em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-astroquery-to-find-data-on-a-series-of-sources">2.4. Using astroquery to find data on a series of sources</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#congratulations-you-finished-this-notebook">Congratulations! You finished this Notebook!</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here">There are more COS data walkthrough Notebooks on different topics. You can find them here.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#citations">Citations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-solutions">Exercise Solutions:</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By STScI
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>